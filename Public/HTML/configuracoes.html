<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Configurações - CuidaFast">
    <title>Configurações</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../assets/icone_verde.svg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../CSS/styles.css">
    <link rel="stylesheet" href="../CSS/header.css">
    <link rel="stylesheet" href="../CSS/pages/configuracao.css">
    link rel="stylesheet" href="../CSS/theme.css">
</head>
<body class="client-home">
        <!-- Pop-up de confirmação de logout -->
<div class="logout-popup" id="logoutPopup">
  <div class="logout-popup-content">
    <div class="popup-icon logout-icon">
      <i class="ph ph-sign-out"></i>
    </div>
    <h3>Sair da conta?</h3>
    <p>Você será redirecionado para a página inicial.</p>
    <div class="logout-popup-buttons">
      <button id="confirmLogout" class="confirm-btn">Sim, sair</button>
      <button id="cancelLogout" class="cancel-btn">Cancelar</button>
    </div>
  </div>
</div>

<!-- Pop-up de confirmação de exclusão de conta -->
<div class="logout-popup" id="deletePopup">
  <div class="logout-popup-content delete-popup-content">
    <div class="popup-icon delete-icon">
      <i class="ph ph-warning"></i>
    </div>
    <h3>Excluir conta permanentemente?</h3>
    <p>Esta ação não pode ser desfeita. Todos os seus dados serão removidos permanentemente.</p>
    <div class="logout-popup-buttons">
      <button id="confirmDelete" class="confirm-btn delete-confirm-btn">Sim, excluir</button>
      <button id="cancelDelete" class="cancel-btn">Cancelar</button>
    </div>
  </div>
</div>
    <!-- Header Moderno -->
    <header class="modern-header">
        <div class="header-container">
            <!-- Logo Section -->
            <div class="header-left">
                <a href="homeCliente.html" class="logo-link">
                    <img id="logo" src="../assets/Logotipo_1_vetorizado.svg" alt="Logotipo CuidaFast" class="logo" />
                    <span class="logo-text"></span>
                </a>
            </div>
            
            <!-- User Actions -->
            <div class="header-right">
                <!-- Notifications -->
                <a href="notificacao.html" class="header-action-btn notification-btn active" id="notificationBtn">
                 <i class="ph ph-bell"></i>
                  <span class="notification-badge" style="display: none;">0</span>
                </a>
              
              <!-- Messages -->
                <a href="mensagens.html" class="header-action-btn message-btn" id="messageBtn">
                  <i class="ph ph-chat-circle"></i>
                  <span class="message-badge" style="display: none;">0</span>
                  </a>
                <!-- User Profile -->
                <div class="user-profile-dropdown" id="userProfileDropdown">
                    <button class="user-profile-btn" id="userProfileBtn">
                        <img src="../assets/images.webp" alt="Avatar do usuário" class="user-avatar-img">
                        <span class="user-name" id="headerUserName">Cliente</span>
                        <i class="ph ph-caret-down dropdown-arrow"></i>
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div class="profile-dropdown-menu" id="profileDropdownMenu">
                        <div class="dropdown-header">
                            <img src="../assets/images.webp" alt="Avatar" class="dropdown-avatar">
                            <div class="dropdown-user-info">
                                <h4 id="dropdownUserName">Cliente</h4>
                                <p>Conta Cliente</p>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="perfilCliente.html" class="dropdown-item">
                            <i class="ph ph-user"></i>
                            <span>Meu Perfil</span>
                        </a>
                        <a href="configuracoes.html" class="dropdown-item active">
                            <i class="ph ph-gear"></i>
                            <span>Configurações</span>
                        </a>
                        <a href="contratarInTime.html" class="dropdown-item">
                            <i class="ph ph-clock"></i>
                            <span>In-time</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="ph ph-question"></i>
                            <span>Ajuda</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="../../index.html" class="dropdown-item logout-item" id="headerLogoutBtn">
                            <i class="ph ph-sign-out"></i>
                            <span>Sair</span>
                        </a>
                    </div>
                </div>
                
                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="ph ph-list"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Search Bar -->
        <div class="mobile-search-container" id="mobileSearchContainer">
            <div class="mobile-search-wrapper">
                <i class="ph ph-magnifying-glass search-icon"></i>
                <input type="text" placeholder="Buscar cuidadores..." class="mobile-search-input">
                <button class="mobile-search-btn" type="button">
                    <i class="ph ph-arrow-right"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Conteúdo principal -->
    <main class="settings-page">
        <header class="settings-header">
            <div class="header-content">
                <div class="header-text">
                    <h1>Configurações</h1>
                    <p class="text-muted">Gerencie suas preferências e configurações de conta</p>
                </div>
                <div class="settings-actions">
                    <!-- Botão removido conforme solicitado -->
                </div>
            </div>
        </header>
        
        <div class="settings-container">
            <div class="settings-content">
                <ul class="settings-options">
                    <li>
                        <a href="perfilCliente.html" class="settings-option">
                            <div class="option-icon">
                                <i class="ph ph-user"></i>
                            </div>
                            <div class="option-details">
                                <h3>Perfil</h3>
                                <p>Gerencie suas informações pessoais</p>
                            </div>
                            <i class="ph ph-caret-right option-arrow"></i>
                        </a>
                    </li>
                    <li>
                        <a href="atividadeCliente.html" class="settings-option">
                            <div class="option-icon">
                                <i class="ph ph-clock-counter-clockwise"></i>
                            </div>
                            <div class="option-details">
                                <h3>Suas atividades</h3>
                                <p>Veja seu histórico de atividades</p>
                            </div>
                            <i class="ph ph-caret-right option-arrow"></i>
                        </a>
                    </li>
<li>
  <a class="settings-option color-option" id="colormode">
    <div class="option-icon">
      <i class="ph ph-sun" id="themeIcon"></i>
    </div>

    <div class="option-details">
      <h3 id="themeTitle">Modo claro</h3>
      <p>Alterna entre o modo escuro e claro</p>
    </div>

    <label class="switch">
      <input type="checkbox" id="themeToggle">
      <span class="slider"></span>
    </label>
  </a>
</li>
<script>  const toggle = document.getElementById("themeToggle");
  const icon = document.getElementById("themeIcon");
  const title = document.getElementById("themeTitle");

  // Aplicar tema salvo caso exista
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark-mode");
    toggle.checked = true;
    icon.classList.replace("ph-sun", "ph-moon");
    title.textContent = "Modo escuro";
  }

  // Alternar tema
  toggle.addEventListener("change", () => {
    document.body.classList.toggle("dark-mode");

    if (document.body.classList.contains("dark-mode")) {
      icon.classList.replace("ph-sun", "ph-moon");
      title.textContent = "Modo escuro";
      localStorage.setItem("theme", "dark");
    } else {
      icon.classList.replace("ph-moon", "ph-sun");
      title.textContent = "Modo claro";
      localStorage.setItem("theme", "light");
    }
  });
</script>

                    <li>
                        <a href="#" class="settings-option delete-option" id="deleteAccount">
                            <div class="option-icon">
                                <i class="ph ph-trash"></i>
                            </div>
                            <div class="option-details">
                                <h3>Excluir conta</h3>
                                <p>Remova permanentemente sua conta e todos os dados associados</p>
                            </div>
                            <i class="ph ph-caret-right option-arrow"></i>
                        </a>
                    </li>
                </ul>
                </div>
            </div>
        </div>
    </main>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const logoutPopup = document.getElementById("logoutPopup");
  const confirmLogoutBtn = document.getElementById("confirmLogout");
  const cancelLogoutBtn = document.getElementById("cancelLogout");

  // pega qualquer um dos botões de logout existentes
  const logoutButtons = [
    document.getElementById("logoutBtn"),
    document.getElementById("headerLogoutBtn")
  ].filter(Boolean); // remove os nulos

  // Função principal de logout
  function handleLogout() {
    localStorage.removeItem("userData");
    localStorage.removeItem("userType");
    window.location.href = "../../index.html";
  }

  // Abre o popup quando clicar em qualquer botão de logout
  logoutButtons.forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      logoutPopup.classList.add("active");
    });
  });

  // Confirma logout
  confirmLogoutBtn.addEventListener("click", handleLogout);

  // Cancela logout
  cancelLogoutBtn.addEventListener("click", () => {
    logoutPopup.classList.remove("active");
  });

  // Fecha popup ao clicar fora
  logoutPopup.addEventListener("click", (e) => {
    if (e.target === logoutPopup) logoutPopup.classList.remove("active");
  });

  // Modal de exclusão de conta
  const deletePopup = document.getElementById("deletePopup");
  const confirmDeleteBtn = document.getElementById("confirmDelete");
  const cancelDeleteBtn = document.getElementById("cancelDelete");
  const deleteAccount = document.getElementById('deleteAccount');
  
  if (deleteAccount) {
    deleteAccount.addEventListener('click', (e) => {
      e.preventDefault();
      deletePopup.classList.add("active");
    });
  }

  // Confirma exclusão
  confirmDeleteBtn.addEventListener("click", () => {
    // Limpar todos os dados do usuário
    localStorage.removeItem("cuidafast_user");
    localStorage.removeItem("cuidafast_isLoggedIn");
    localStorage.removeItem("userData");
    localStorage.removeItem("userType");
    
    // Remover da lista de usuários
    const usuarios = JSON.parse(localStorage.getItem('cuidafast_usuarios') || '[]');
    const userData = JSON.parse(localStorage.getItem('cuidafast_user') || '{}');
    const novosUsuarios = usuarios.filter(u => u.email !== userData.email);
    localStorage.setItem('cuidafast_usuarios', JSON.stringify(novosUsuarios));
    
    alert('Conta excluída com sucesso.');
    window.location.href = '../../index.html';
  });

  // Cancela exclusão
  cancelDeleteBtn.addEventListener("click", () => {
    deletePopup.classList.remove("active");
  });

  // Fecha popup ao clicar fora
  deletePopup.addEventListener("click", (e) => {
    if (e.target === deletePopup) deletePopup.classList.remove("active");
  });

  // Dropdown de perfil
  const profileBtn = document.getElementById('userProfileBtn');
  const dropdownMenu = document.getElementById('profileDropdownMenu');

  if (profileBtn && dropdownMenu) {
    profileBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdownMenu.classList.toggle('show');
    });

    document.addEventListener('click', () => {
      dropdownMenu.classList.remove('show');
    });

    dropdownMenu.addEventListener('click', (e) => {
      e.stopPropagation();
    });
  }
});
</script>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../JS/header.js"></script>

</body>
